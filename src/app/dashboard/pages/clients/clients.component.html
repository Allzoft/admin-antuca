<div class="flex justify-content-between">
  <app-title title="Lista de clientes" />
  <div class="flex gap-3 justify-content-center align-items-center">
    <p-button
      severity="info"
      [outlined]="true"
      [rounded]="true"
      [icon]="clientsService.loading() ? 'pi pi-spin pi-spinner font-medium text-xl' : 'pi pi-refresh font-medium text-xl'"
      size="small"
      (onClick)="refreshData()"
    ></p-button>
    <p-button
      severity="success"
      icon="pi pi-user-plus font-medium"
      label="Nuev@ cliente"
      [rounded]="true"
      styleClass="text-sm"
      (onClick)="createClient()"
    ></p-button>
  </div>
</div>
<p-card class="p-0">
  <p-table [value]="clients()" styleClass="-mt-5 -mb-3 p-datatable-sm">
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Foto</th>
        <th>Nombre</th>
        <th>Tel√©fono</th>
        <th>Correo</th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-client>
      <tr>
        <td>{{ client.id_client }}</td>
        <td>
          <img
            [src]="client!.photo | image"
            class="border-circle w-2rem h-2rem"
            alt="Profile"
          />
        </td>
        <td>{{ client.name }} {{ client.lastname }}</td>
        <td>{{ client.phone }}</td>
        <td>{{ client.email }}</td>
        <td class="w-8rem">
          <p-button
            icon="pi pi-pencil"
            [rounded]="true"
            [outlined]="true"
            styleClass="h-2rem w-2rem"
            (onClick)="showClient(client)"
          ></p-button>
          <p-button
            icon="pi pi-trash"
            severity="danger"
            [rounded]="true"
            [outlined]="true"
            styleClass="h-2rem w-2rem ml-2"
            (onClick)="deleteClient(client)"
          ></p-button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="footer">
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>{{ 'Total: ' + clients().length }}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6">No hay clientes registrados</td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
<p-toast position="top-center"></p-toast>
<p-confirmDialog styleClass="w-auto md:w-5" position="bottom"></p-confirmDialog>
